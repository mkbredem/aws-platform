---
- name: refresh automation hub token so it doesn't expire
  hosts: localhost

  tasks:
    command: curl "https://sso.redhat.com/auth/realms/redhat-external/protocol/openid-connect/token" -d grant_type=refresh_token -d client_id="cloud-services" -d refresh_token="eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZDUyMjdhMy1iY2ZkLTRjZjAtYTdiNi0zOTk4MzVhMDg1NjYifQ.eyJpYXQiOjE2NTY0Mzg1MTQsImp0aSI6IjU4NmZjYjZjLWE1ZTEtNGRmMi05NmE4LTc2YWZjYzkyNzhjMCIsImlzcyI6Imh0dHBzOi8vc3NvLnJlZGhhdC5jb20vYXV0aC9yZWFsbXMvcmVkaGF0LWV4dGVybmFsIiwiYXVkIjoiaHR0cHM6Ly9zc28ucmVkaGF0LmNvbS9hdXRoL3JlYWxtcy9yZWRoYXQtZXh0ZXJuYWwiLCJzdWIiOiJmOjUyOGQ3NmZmLWY3MDgtNDNlZC04Y2Q1LWZlMTZmNGZlMGNlNjptYnJlZGVtZSIsInR5cCI6Ik9mZmxpbmUiLCJhenAiOiJjbG91ZC1zZXJ2aWNlcyIsIm5vbmNlIjoiM2E4ODNiYTktY2NkNC00M2UwLThmMDgtZTJlZmQxMDNlYzFkIiwic2Vzc2lvbl9zdGF0ZSI6IjM2OTA2OTY3LTQ5M2ItNGFmZC04MmI4LTJjMWIyYzQwMzMyMCIsInNjb3BlIjoib3BlbmlkIGlhbS5jbGllbnRzLnNlcnZpY2VfYWNjb3VudHMgb2ZmbGluZV9hY2Nlc3MiLCJzaWQiOiIzNjkwNjk2Ny00OTNiLTRhZmQtODJiOC0yYzFiMmM0MDMzMjAifQ.tD-aTKpKbQIRs0Kut1Abs7bYEZu6JhVDGrtKJQDIbQ8" --fail --silent --show-error --output /dev/null