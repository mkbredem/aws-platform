---
# tasks file for generate_new_ssh_keys
- name: Force regenerate an OpenSSH keypair if it already exists
  community.crypto.openssh_keypair:
    path: /home/{{item}}/id_rsa
    force: True
    comment: "{{item}}"
  loop: "{{users}}"
  register: r_new_keys

- name: initialize bastion_server variable
  set_fact:
    bastion_server: "{{inventory_hostname}}"
  delegate_to: localhost

- name: what is the value some_server  
  debug:
    var: hostvars['localhost']

- name: load some_server var with hosts to target for configuration
  set_stats:
    data: 
      some_server: "{{hostvars['localhost']['ansible_facts']['bastion_server']}}"
    
- name: does bastion server work before the next play is run?
  debug:
    var: hostvars['localhost']['ansible_facts']['bastion_server']
      
