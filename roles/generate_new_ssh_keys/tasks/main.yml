---
# tasks file for generate_new_ssh_keys
- name: Force regenerate an OpenSSH keypair if it already exists
  community.crypto.openssh_keypair:
    path: /home/{{item}}/id_rsa
    force: True
    comment: "{{item}}"
  loop: "{{users}}"
  register: r_new_keys

- name: list new keys
  debug: 
    var: r_new_keys

#- name: load target_hosts list with hosts to target for configuration
#  set_stats:
#    data: 
#      target_hosts: "{{ target_hosts + [ item.public_dns_name ] }}"
#  loop: "{{ ec2_instance_facts.instances }}"